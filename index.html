<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Clima con OpenWeather API</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logoWeather.png" type="image/png">
</head>
<body>

    <img src="./logoWeather.png" alt="Sol y Nube" id="headerImage">

    <h1>Consulta el Clima</h1>

    <div id="search">
        <input type="text" id="cityInput" placeholder="Ingresa el nombre de la ciudad">
        <button onclick="getWeather()">Buscar Clima</button>
    </div>

    <div id="weather">
        <h2>Clima de la ciudad aparecerá aquí</h2>
        <p>Introduce una ciudad para obtener el clima actual.</p>
    </div>

    <footer>
        <p>Hecho por Julio Sanchez &copy; 2024</p>
    </footer>

    <script>
        const apiKey = '99c10dc1302d2d14938a0634953fed60';

        function getWeather() {
            const city = document.getElementById('cityInput').value;
            const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la solicitud de la API');
                    }
                    return response.json();
                })
                .then(data => {
                    const temperature = data.main.temp;
                    const weatherDescription = data.weather[0].description;
                    const weatherIcon = data.weather[0].icon;
                    const iconUrl = `https://openweathermap.org/img/wn/${weatherIcon}@2x.png`;

                    document.getElementById('weather').innerHTML = `
                        <h2>Clima en ${city}</h2>
                        <p>Temperatura: ${temperature}°C</p>
                        <p>Descripción: ${weatherDescription}</p>
                        <img src="${iconUrl}" alt="Icono del clima">
                    `;
                    document.getElementById('weather').classList.add('show');
                })
                .catch(error => {
                    console.error('Error al obtener los datos:', error);
                    document.getElementById('weather').innerHTML = `
                        <h2>Error al obtener el clima</h2>
                        <p>Por favor verifica el nombre de la ciudad e intenta de nuevo.</p>
                    `;
                });
        }

        document.getElementById('cityInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                getWeather();
            }
        });
    </script>

</body>
</html>
